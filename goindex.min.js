(function(){var k=window;var p=new Date(),o=p.getMonth()+1;var l=p.getFullYear()+"-"+o+"-"+p.getDate()+" "+p.getHours()+":"+p.getMinutes()+":"+p.getSeconds();var j={jfVersion:"1.0.0",openTime:l,httpUrlBasic:"http://10.152.16.9:3002/plugin/api/setBasic",httpUrl:"http://10.152.16.9:3002/plugin/api/setHtmlError"};var a=window._maq||[];if(a){for(var r in a){switch(a[r][0]){case"_setAccount":j.account=a[r][1];j.source=a[r][2];break;default:break}}}if(document){j.domain=document.domain||"";j.localUrl=document.URL||"";j.title=document.title||"";j.referrer=document.referrer||""}if(navigator){j.lang=navigator.language||"";j.userAgent=navigator.userAgent||"",j.appVersion=navigator.appVersion||"",j.appName=navigator.appName||"",j.platform=navigator.platform||""}if(k&&k.screen){j.sh=k.screen.height||0;j.sw=k.screen.width||0;j.cd=k.screen.colorDepth||0}var f={set:function(i,m){if(this.get(i)!==null){this.remove(i,false)}localStorage.setItem(i,m)},get:function(m){var i=localStorage.getItem(m);return i===undefined?null:i},remove:function(i){if(!i){return}q(i)},clear:function(){localStorage.clear()}};function h(i){var m;if(i.indexOf("SyntaxError")>0){m="SyntaxError"}else{if(i.indexOf("ReferenceError")>0){m="ReferenceError"}else{if(i.indexOf("RangeError")>0){m="RangeError"}else{if(i.indexOf("TypeError")>0){m="TypeError"}else{if(i.indexOf("URLError")>0){m="URLError"}else{if(i.indexOf("EvalError")>0){m="EvalError"}else{m="Initialize failed"}}}}}}return m}k.onerror=function c(x,i,y,B,m){if(x==="Script error."&&!i){return true}var w={};m=!m?{}:m;if(!m&&!m.stack){w.sMsg=m.stack.toString()}else{if(arguments.callee){var t=[];var z=arguments.callee.caller,A=3;while(z&&(--A>0)){t.push(z.toString());if(z===z.caller){break}z=z.caller}t=t.join(",");if(typeof m.stack=="undefined"){m.stack=""}w.sMsg=m.stack.toString()}}w.sUrl=i;w.sLine=y;w.sColu=B;w.eObj=m;w.type=h(x);e(w);return w};function e(x){if(typeof x=="object"){if(!k.localStorage){alert("浏览器不支持localStorage");return}var m={type:x.type,sMsg:x.sMsg,sUrl:x.sUrl,sLine:x.sLine,sColu:x.sColu,eObj:x.eObj?x.eObj.stack:"",sTime:p.getTime()};var w=JSON.stringify(m);var i=!x.sMsg?"":x.sMsg.split(":")[1].replace(/\s+/g,"");i=i.substr(0,i.length/2);f.set("err_"+i,w)}}function n(){var t=true;var w=k.navigator.userAgent;var m=k.navigator.connection;if(/MicroMessenger/.test(w)){if(/NetType/.test(w)){var y=w.match(/NetType\/(\S)+/)[0].replace("NetType/","");if(y&&y!="WIFI"){t=false}}else{document.addEventListener("WeixinJSBridgeReady",function i(){WeixinJSBridge.invoke("getNetworkType",{},function(z){if(z.err_msg!="network_type:wifi"){t=false}})})}}else{if(m){var x=m.effectiveType;if(x!="wifi"&&x!="4g"&&x!="unknown"){t=false}}}k.networkWIFI=t;return k.networkWIFI}var s={get:function(i,m){var t=new XMLHttpRequest();t.open("GET",i,true);t.onreadystatechange=function(){if(t.readyState==4&&t.status==200||t.status==304){m.call(this,t.responseText);console.log("调用成功",i)}console.log("调用不成功，url地址不对或者服务有问题或者网络问题。",i)};t.send(null)},post:function(i,w,m){var t=new XMLHttpRequest();t.open("post",i,true);t.setRequestHeader("Content-type","application/json");t.onreadystatechange=function(){if(t.readyState==4&&t.status==200||t.status==304){m.call(this,t.responseText);console.log("调用成功",i)}console.log("调用不成功，url地址不对或者服务有问题或者网络问题。",i)};t.send(w)}};function d(t){var w={};if(t==="undefied"&&typeof t!=="object"){return}for(var m in t){if(m.charAt(1)==="r"){w[m]=t[m]}}return w}function q(t){if(t==="undefied"&&typeof t!=="object"){return}for(var m in t){localStorage.removeItem(m)}}var g=d(localStorage);var v={account:j.account,jfVersion:j.jfVersion,openTime:j.openTime,source:j.source,userAgent:j.userAgent,appName:j.appName,platform:j.platform,appVersion:j.appVersion,domain:j.domain,localUrl:j.localUrl,title:j.title,referrer:j.referrer,lang:j.lang,sh:j.sh,sw:j.sw,cd:j.cd};v=JSON.stringify(v);var u=JSON.stringify(g);var b=n();s.post(j.httpUrlBasic,v,function(){});if(typeof u!=="undefined"){s.post(j.httpUrl,u,function(m){var i=JSON.parse(m);if(i.success){f.remove(g)}})}})();